系统分析师笔记
=======================

[TOC]

## 计算机体系结构
### 计算机组成
#### 五大部分
控制器、运算器、存储器、输入设备、输出设备

控制器:寄存器+计数器
运算器:算数运算单元+逻辑运算单元
控制器+运算器=CPU
存储器：存储程序、数据、中间结果。分主存储器（内存）、辅存储器（磁盘）、寄存器、Cache（告诉缓存）。

#### 存储器存取方式
- 顺序存取，共享读写装置，线性处理，如磁带
- 直接存取，共享读写装置，数据分块，可直接定位到块，如磁盘
- 随机存取，寻址单元专有读写装置，每个寻址单元可直接访问，如主存储器
- 相联存取，寻址单元专有读写装置，每个寻址单元可直接访问，可根据内容关联选取块，如Cache

#### 辅助存储器
##### 磁带
顺序存取，容量大价格便宜适合备份存储
##### 磁盘
直接存取，组成部分：组合臂、柱面、盘面（磁道、扇区），磁道从外向内0是最外层。  
- 格式化磁盘容量=n(盘面数)×f(磁道数)×s(扇区数)×b(单扇区字节数)
- 非格式化磁盘容量=盘面数×内直径周长×位密度×内外半径之间磁道数
- 存取时间，包括寻道、旋转、数据传输时间
##### 磁盘阵列RAID
是多个磁盘成为磁盘组。
- RAID0，无冗余无校验，数据分散到多盘并行存取
- RAID1，磁盘镜像，每块盘有一个完全相同备份
- RAID2，海明纠错码，第2N个盘存做校验盘
- RAID3，奇偶校验并行传送，N+1盘做校验盘
- RAID4，奇偶校验独立磁盘，N+1盘做校验盘，校验盘是瓶颈
- RAID5，数据和奇偶校验信息分散到各个盘，空间利用率较高为：(N-1)/N。RAID5和4适合请求率高的应用，不适用于传输率高
- RAID6，扩展RAID5，每个数据块有2个校验保护，写入性能低于RAID5
- RAID7，异步高IO速率和传输率，多个磁盘组成一个柱子，磁盘组各自有读写通道
- RAID1+0，两组RAID0，互相成为RAID1，性能好可靠性高，利用率低为50%
##### Cache
采用SRAM，速度快于主存(DRAM)，处理cpu和主存之间，改善性能的依据是程序局部性原理。系统平均访存时间：t=h × tC + (1 - h) × tM，h为命中率,tC访问Cache时间，tM访问主存时间
- Cache映射机制，相联存储器CAM，使用地址映射，包括直接映射、全相连、组相连。
- Cache写操作，一致性方法：写直达(cache、内存同时写)、写回(写cache不写主存，换出时写内存)、标记法(写主存并置0失效cache，读cache时检查标记决定是否有效)

#### 输入输出方式
##### 5种方式：
1. 程序查询（最初期）
2. 中断控制（打印机扫描仪）
3. 直接存储器访问DMA
4. 通道方式
5. 外围处理机

##### 总线与接口
问位置
* 内部总线，CPU内部
* 外部总线，CPU与内存、输入输出设备之间
总线，按供
* ABus地址总线
* DBus数据总线
* CBus控制总线

##### 指令集：
* CISC，复杂指令集，指令多，寻址方式多，支持变长指令
* RISC，精简指令集，指令少，寻址方式少（寄存器寻址、立即寻址、相对寻址），指令长度固定，存储器指令只有Load/Store，指令在一个周期内可完成，容易利用流水线，并行程度高

##### 流水线
把一个任务分解为若干顺序执行的子任务，不同任务由不同执行机构负责，不同执行机构可并行。
* 执行时间
流水线时间取决于最慢的子任务：Nt+(k-1)t
* 流水线吞吐率
单位时间完成任务数，
* 影响流水线的因素：转移指令，共享资源访问冲突，响应中断


### 计算机分类
分类方法
#### flynn
根据指令流、数据流和多倍性三方面分类。4种结构：
    - 单指令流单数据流，单处理机系统
    - 单指令流多数据流，并行处理机、阵列处理机，超级向量处理机
    - 多指令流单数据流，没有此类机器
    - 多指令流多数据流，多处理机系统
#### 冯氏
根据单位时间能处理的最大二进制位分类。
    - 字串位串
    - 字并位串(字宽>1，位宽=1)
    - 字串位并
    - 字并位并
> “串”=1，“并”>1。字宽是字中可处理的二进制位数，位宽是位中可处理的字数



# 软件工程
## 软件开发生命周期
主要过程：获取（需求、招投标等于客户交流）-供应（商务、计划、交付）-开发-运行-维护
支持过程：文档编制-配置管理-质量保证-验证-确认-评审-神年纪-问题解决
组织过程：管理-基础设施-个改进-培训
## 软件开发方法(4)
### 净室方法
严格控制工程化软件过程达到或接近零缺陷，要求在设计中消除错误。
> 使用盒结构分析和设计模型,盒模型逐步细化，包括：黑盒->状态盒->清晰盒，逐步清晰  

### 结构化方法
自顶向下，逐步求精，把大问题分解为小问题。
#### 结构化分析阶段
包括：结构化分析SA、结构化设计SD、结构化实现SP。
* SA: 图形表示用户需求，图形有数据流DFD、数据字典、结构化语言、判定表等
* SD&SA：评审和细化DFD，得出模块结构图，分解模块层次，得出合理结构，定模块接口，进行开发
> 优点：每个阶段有明确任务与成果物；缺点：开发周期长，易忽视数据结构，对结构化程度低的系统开发初期不易锁定功能。  

### 原型法
获取基本需求后利用可视化开发环境快速开发一个最初版本，交付用户并收集反馈，反复进行这个交付过程。适用于用户需求不明确场合。
#### 原型分类
- 水平原型（UI确认）
- 垂直原型（功能深度探讨）
- 抛弃型原型（探索）
- 演化型原型（不抛弃）

原型生存期：快速分析-构造-运行-评价

### 逆向工程法
对现有软件系统重新开发的过程。方式为再工程、软件重构、逆向工程。

## 软件开发模型(12)
瀑布模型、演化模型，增量模型、螺旋模型、喷泉模型、智能模型、V模型、快速应用开发模型、构建组装模型、敏捷方法、统一过程  


### 瀑布模型
又称生命周期法：
- 定义（计划）
- 开发（需求/设计/编码/测试）
- 维护  

### 演化模型
获取用户基本需求，快速分析构造一个原型，根据用户使用过程中逐步改进，最终获得用户满意版本。

### ==螺旋模型==
**结合瀑布+演化模型**，增加**风险分析**，螺旋每转一圈需有计划、风险分析、实施、评价等，不断螺旋上升。  
### 喷泉模型
以用户需求为动力，以对象为驱动，认为软件开发过程是自下而上的，各节点没有明显间隙。 

### 智能模型
**结合瀑布+专家系统**，应用基于规则的系统，采用归约和推理机制帮助完成开发。需要有专家知识库。 

### ==增量模型==
结合瀑布+原型迭代特征，先实现用户基本需求再经过使用和评估并发布下一个增量。  
**增量VS演化**
- 共同点：两者都是迭代过程
- 区别点：增量模型强调每一个增量都是可操作产品而非原型，增量模型可将原型细化，分别开发（出一个需求开发一个）
> 增量模型对架构开发式结构要求高不易掌控。

### 迭代模型
将整个生命周期分为若干个冲刺，每个冲刺都是一个小的开发流程：初始-细化-构建-交付。  

### ==构件组装（CBSD）==
复用构件库的一个或多个构件来构造系统。构件和软件开发工作应分开，构件开发过程：领域分析-领域涉及-构件实现。5个阶段：需求分析和定义-体系结构-建立构件库-构建软件-测试和发布。
构建开发和软件开发应分开团队。
> 优点：提高效率，降低费用，质量较高；缺点：构件可能缺乏通用标准，引入和组装存在风险，可重用性和高效性不易协调，开发难度高，构件库质量影响产品质量

### V模型（测试驱动）
以测试驱动，强调测试的作用。
|开发<-测试|对应关系|
|--|--|
|需求分析<-验收测试|检验符合最终用户需求|
|概要设计<-系统测试|检验系统符合规划说明书|
|详细设计<-集成测试|检验组成部分完好结合|
|编码实现<-单元测试|检验符合详细设计|

### 快速应用开发（RAD）
增量型软件开发模型，强调极短周期快速开发。复用构件增量开发，是瀑布模型的高速变种。
流程：业务建模-数据建模-过程建模-应用生成-测试与交付

### 敏捷开发
快速响应需求变化，强调程序员团队和业务专家紧密协作，强调面对面沟通，持续而频繁的交付，紧凑而自我组织型团队。
敏捷方法：SCRUM/极限编程/自适应/水晶方法/特性驱动
> SCRUM(产品负责人PO+小团队+增量软件开发)

### ==统一过程（UP/RUP）==
是一个通用的过程框架，可广泛用于各类软件系统。UP建模使用UML语言。  
#### UP的3个显著特点
用例驱动、体系结构为中心、迭代和增量。

#### 软件过程分为4阶段
初始-细化-构建-交付。  
4阶段都包含基本流程环节：建模-需求-设计-实现-测试-部署-管理等，不同阶段下每个环节占比有区别，每个阶段安排一次评审。

## 软件总体规划
总体规划：确定软件发展方向及如何发展。  
规划节点：
1. 初步调查
2. 确认目标
3. 分析组成
4. 拟定方案
5. 可行性分析
6. 可行性报告 

### 可行性分析
3方面考虑：技术/经济/操作  
分析步骤(从核实问题到可行性报告）：
1. 核实问题
2. 分析现有系统
3. 新系统建模
4. 用户复核
5. 评价模型
6. 确定最优解
7. 草拟计划
8. 提交可行性报告

### 成本效益分析
两方面收益，有形&无形：
#### 有形效益
货币时间价值、投资回收期和回收率等可以量化的指标  
(1).利息&利率，资金的时间价值体现为资金运用带来的利润和利息，利息是绝对尺度，利率是相对尺度，单利&复利；  
(2).折现&折现率，未来某时间点的金额折算为现在的金额，公式：金额C/(1+i)<sup>n</sup>；净现值(NPV)，项目生命周期各年净现金流按折现率折算到现值之和，净现值率(NPVR)可衡量多个投资方案优劣；  
(3).投资回收期：从项目投建开始，到项目所得净收益偿还原始投资所需时间（“收益”偿还“成本”的时间）；根据**是否考虑资金的时间价值**而分为静态投资回收期和动态投资回收期。*注意：投资回收期计算时应包括建设期（除特殊说明）。*
静态投资回收期法：（总投资/平均每年净回收）或（总投资-各年投资之和，直至全部回收）。  
动态投资回收期法：`Tp=(累计净现金流量折现值为正的起始年份-1 +|上年累计净现金流量折现值|/当年净现金流量折现值`(就是把收益转正那年的具体时间精确到小数位)
(4).投资回收率=1/投资回收期
(5).内部收益率(IRR)指资金流入现值总额等于资金流出现值总额、现值等于0时的折现率。
(6).盈亏平衡点，即销售收入等于总成本的时间点

#### 无形效益
从性质、心里方面衡量等无法量化的

## 系统规划与问题定义
系统建模，目的建立新系统物理模型
问题定义，包含3方面：
1. 目标
2. 功能需求
3. 非功能需求

## 需求工程
包括需求开发、需求管理。
- 需求开发：获取、分析、定义（编写规格说明书）、验证
- 需求管理：定义基线、需求变更、需求跟踪

### 业务流程分析
1. 调查基本情况
2. 描述现有业务流程
3. 确认现有流程
4. 分析流程
5. 发现问题并提出解决方案
6. 提出优化后流程  

### 数据流图DFD
4种基本符号数据流（箭头）、加工（圆圈）、数据存储（直线段）、外部实体（数据源及数据终点，用方框）。
### 数据字典
数据信息的集合，对数据项、数据结构、数据流图的描述

### 需求跟踪
正向跟踪、逆向跟踪

## 软件设计
### 概要设计
设计结构，划分模块，确认模块关系。
采用图形：
- 结构图（包括模块、调用和数据）
- 层次图
- HIPO（层次图加输入输出）  
### 详细设计
对每个模块做详细结构和算法。  
采用图形：
- 程序流程图
- 盒图
- PAD图（Problem Analysis Diagram 问题分析图）
- PDL图（Problem Design Languate 伪代码）

### 设计活动
包含4个活动：
- 数据结构设计
- 软件结构设计
- 人机界面设计
- 过程设计

#### 结构化设计
包括体系结构、接口设计、数据设计、过程设计。方法为自顶向下逐步求精和模块化。

模块：执行某一特定个任务的数据结构和程序代码。设计时原则是信息隐蔽和模块独立。
#### 模块设计
##### 内聚度7级（高->低）
* 功能内聚：**内聚最高**，完成单一供能，各部分协同工作
* 顺序内聚：处理元素必须顺序执行
* 通信内聚：处理元素集中在一个数据结构
* 过程内聚：必须按特定次序处理
* 瞬时内聚：必须在同一时间间隔执行（如初始化）
* 逻辑内聚：一组任务逻辑上相关（打开窗口前进行A、B、C操作）
* 偶然内聚：**内聚最低**，完成一组任务无相关或松散相关

##### 耦合度7级（低->高）
* 非直接耦合：**耦合最低**，互不依赖
* 数据耦合：借助参数传递数据
* 控制耦合：数据结构一部分借助接口传递
* 外部耦合：传递的信息可控制模块内部逻辑
* 公共耦合：与软件外环境有关
* 内容耦合：**耦合最高**，直接访问另一模块内部数据

##### 模块设计原则
- 大小适中
- 调用深度少
- 扇入大扇出少
- 单入口单出口
- 作用域在模块内
- 功能可预测

#### 工作流设计
工作流(work flow)：业务过程的部分或整体在计算机应用环境下自动化，多个参与者之间按预定义的规则自动传递文档、信息或任务的过程。


## 软件测试
对软件产品进行验证和确认的活动过程。软件测试是发现和缺陷的主要手段之一。  
### 测试类型
动态测试、静态测试。 

静态测试：桌前检查（运行前自查）、代码审查（小组开会自讲）、代码走查（检查小组检查）  

### 动态测试分类
- 黑盒（功能测试、数据驱动测试），方法：等价类分析、边界值分析、错误推测、因果图
- 白盒（结构测试、透明盒测试），方法：基本路径测试、循环覆盖测试、逻辑覆盖测试
- 灰盒，结合黑盒白盒，既关注输入输出也关注内部表现，通过表征性现象、事件及标志判断程序内部运行状态


### 测试阶段 
- 单元测试，在详细设计阶段产生计划
- 集成测试（系统联调），在概要设计阶段产生计划
- 确认测试（需求确认），在需求分析阶段产生计划
- 系统测试，对整个产品系统进行测试，验证是否满足需求规格定义，在系统分析阶段产生计划。包含：功能测试、健壮性测试、性能测试、用户界面测试、安全性测试、安装反安装测试等

### 性能测试
对系统各项性能指标进行测试，验证是否达到用户的性能指标，和发现软件存在的性能瓶颈，并优化软件系统。性能测试分类：
- 负载测试，各种负载条件下的性能表现
- 压力测试，确定系统瓶颈和最大服务级别
- 强度测试，系统资源特别低情况下的运行情况测试
- 容量测试，系统可同时处理的在线用户

### 测试自动化
使用测试工具和开发程序自动完成测试。

### 软件调试：
- 蛮力法（人工找）
- 回溯法（从出错点向回找）
- 原因排除法（假定原因并排除）

### 软件测试过程的阶段
测试计划->测试设计->测试执行->测试评估

## 系统运行和维护
新旧系统转换：直接、并行、逐步替代

### 软件维护 
可维护性：纠正程序错误和满足新需求进行修改的容易程度。相关概念：可理解性、可测试性、可修改性。  
软件开发阶段中占比最大，可达60%~80%，包括：
- 改正性维护，20%，改bug
- 适应性维护，25%，适配环境
- 完善性维护，50%，补充需求
- 预防性维护，5%，预防问题

# 软件体系结构
（见系统架构师）

# 案例分析
1. 结构化分析。问题分析阶段完成的4个任务：研究问题领域、分析问题和机会、制定改进目标、修改项目计划。
因果分析法是问题分析的重要技术，可得出对系统问题的理解，有助于提出创造性方案，分析内容包括：问题与机会、原因与结果、改进目标、系统约束
系统约束包含：时间约束、成本约束、功能约束、质量约束
2. 结构化分析VS面向对象分析
    结构化分析：结构化、模块化的自顶向下分析，功能分解到模块，使用ER图、DFD图
    面向对象分析：确定概念类，建立交互关系，使用用例图、交互图
 性能扩展技术：服务器集群技术、库表散列、负载均衡、CDN内容分发、网络架构缓存、（异步消息队、数据切分）
3. MIS系统。数据库视图，动态产生结果集、使用灵活可定制数据、管理方便简化数据操作，可合并分立数据、创建分区视图，对数据提供安全保护：
    多表数据不一致性问题的解决：应用程序实现、触发器实现、物化视图实现。
4. rest风格原则：所有事物可抽象为资源；每个资源有唯一标识；通过通用的借口对资源操作；资源操作不会改变标识；操作无状态；
5. 微服务包含资源、资源API。优点：服务拆分解决单体复杂性，服务独立开发独立自由选型，独立部署依赖少，独立扩展；缺点：有些系统无法拆解微服务，部署复杂度高、分布式数据一致性问题。
6. 数据库设计阶段：概念设计（ER模型DBMS无关）、逻辑设计（特定DBMS支持的模型）、物理设计（具体存储结构和技术相关）。范式：1范式不可再分，2范式非主全依赖主，3范式无传递依赖
7. 反规范化：冗余、派生、重组、分割。水平分区为：范围分区、哈希分区、列表分区
8. 改进方案：负载均衡、缓存服务器、分布式存储、Web应用服务器、分布式数据库。分布式数据库将数据分散存储在一组数据库上，分散在不同计算机，每个节点可执行局部应用，也可执行全局应用，采用技术包括数据分片、查询优化、读写分离等技术
9. 可行性分析包括技术分析，投资收益分析，社会可行性，执行可行性，使用可行性


# 案例题
## 需求分析（数据流图）
### 需求分析过程
1. 绘制系统上下文范围关系图
2. 创建用户界面原型
3. 分析需求的可行性
4. 确定需求的优先级
5. 为需求建立模型
6. 创建数据字典
7. 使用QFD质量功能部署

### 数据流图DFD
数据流图DFD用于表示信息系统中的数据流，表达了系统数据从输入到存储之间所涉及的程序。数据流图包含数据流、加工、存储、外部实体。
DFD是理解和表达用户需求的工具，是需求分析的手段，DFD简明易懂，用户也容易理解，系统分析师可以通过DFD与用户进行交流。  
DFD描述了系统内部逻辑过程，是需求分析结果的表达工具，也是系统设计的重要参考，是数据起点  
DFD是存档的资料，可作为进一步修改可充实开发的依据。

## 用例图
包含参与者、用例、通信关联。
- 参与者，是存在于系统外部并与系统交互的任何事物
- 用例，表示系统所能提供的服务，定义了系统如何被使用
- 通信关联，表示参与者与用例之间的关系，或用例与用例之间的关系  

OOA方法中，构建用例模型一般需要4个阶段：
1. 识别参与者
2. 合并需求**获得用例**
3. **细化用例**描述
4. 调整用例模型


### 面向服务架构SOA
SOA是一个组件模型，将应用程序的不同单元进行拆分为服务，通过服务之间定义良好的接口和协议联系起来。接口是采用中立的方式进行定义的，应该独立于实现服务的硬件平台、操作系统和编程语言，使得构建系统中的各种服务可以一种统一和通用方式进行交互。  
ESB总线的作用：
1. 是SOA的一种实现方式，起到总线作用，将各种服务进行了解整合；
2. 描述服务的元数据和服务注册管理；
3. 在服务请求者和提供者之间传递数据，以及对数据进行转换的能力
4. 发现、路由、匹配的能力，支持服务之间动态交互，解耦服务请求者和服务提供者。并可提供一些高级的安全支持，服务质量保证、可管理型和负载均衡等。

ESB企业总结需要具备的功能：
1. 服务统一管理，提供统一标准化可靠可扩展的服务管理平台
2. 集成服务，提供服务集成，支持服务分解，服务调度、路由、封装等
3. 提供公用服务，如认证、日志
4. 服务协议转换，把不同协议转换为标准报文，屏蔽差异
5. 服务监控，提供服务等级管理、流量管理、实时监控、报警与交易分析。
6. 安全体系，提供多种安全机制，并能支持第三方呢安全系统集成

可实现信息系统数据交互安全性的手段：
1. 通信安全，引入https协议或采用加密技术对数据传输过程加密
2. 完整性，采用信息摘要技术对重要信息进行完整性验证
3. 身份鉴别，交易类敏感信息采用数字签名机制
4. 存储加密，敏感数据采用加密算法加密存取
